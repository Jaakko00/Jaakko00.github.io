{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"./App.css\";import React from\"react\";import axios from\"axios\";import Post from\"./Post\";import PostForm from\"./PostForm\";import{Row}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=/*#__PURE__*/function(_React$Component){_inherits(Posts,_React$Component);var _super=_createSuper(Posts);function Posts(props){var _this;_classCallCheck(this,Posts);_this=_super.call(this,props);_this.state={posts:[],showDelete:false};_this.addNewPost=_this.addNewPost.bind(_assertThisInitialized(_this));_this.deletePost=_this.deletePost.bind(_assertThisInitialized(_this));_this.showDeleteButton=_this.showDeleteButton.bind(_assertThisInitialized(_this));_this.handleShowDeleteButton=_this.handleShowDeleteButton.bind(_assertThisInitialized(_this));return _this;}_createClass(Posts,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get(\"https://bullet-in-board.herokuapp.com/posts\").then(function(response){_this2.setState({posts:response.data});}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}}},_callee);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()/**\n   * addNewPost adds a new post to the database\n   *\n   * After randomly deciding for a color, it creates a newPost with all the given information, and then sends that to the database\n   * @param {string} text\n   * @param {string} sender\n   * @param {string} title\n   */},{key:\"addNewPost\",value:function(){var _addNewPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(text,sender,title){var _this3=this;var randomColor,create_time,color,newPost;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:randomColor=function _randomColor(){var randomnumber=Math.floor(Math.random()*(4-1+1))+1;if(randomnumber===1){return\"success\";}if(randomnumber===2){return\"danger\";}if(randomnumber===3){return\"warning\";}else{return\"info\";}};console.log(\"Adding post\");/**\n     * randomColor randomly chooses out of 4 bootstrap colors\n     * @returns {string} color\n     */create_time=new Date().toISOString().slice(0,10);color=randomColor();newPost={content:text,create_time:create_time,sender:sender,title:title,color:color};console.log(newPost);axios.post(\"https://bullet-in-board.herokuapp.com/posts\",newPost).catch(function(error){console.log(error);}).then(function(response){console.log(\"Added new post\");axios.get(\"https://bullet-in-board.herokuapp.com/posts\").then(function(response){_this3.setState({posts:response.data});}).catch(function(error){console.log(error);});});case 7:case\"end\":return _context2.stop();}}},_callee2);}));function addNewPost(_x,_x2,_x3){return _addNewPost.apply(this,arguments);}return addNewPost;}()/**\n   * deletePost finds the id of the post given, and deletes it off the database and state\n   * @param {object} post\n   */},{key:\"deletePost\",value:function(){var _deletePost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(post){var _this4=this;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:axios.delete(\"https://bullet-in-board.herokuapp.com/posts/\".concat(post.id)).then(function(response){_this4.setState({posts:_this4.state.posts.filter(function(postToStay){return postToStay.id!==post.id;})});}).catch(function(error){console.log(error);});case 1:case\"end\":return _context3.stop();}}},_callee3);}));function deletePost(_x4){return _deletePost.apply(this,arguments);}return deletePost;}()},{key:\"handleShowDeleteButton\",value:function handleShowDeleteButton(){this.setState(function(_ref){var showDelete=_ref.showDelete;return{showDelete:!showDelete};});}},{key:\"showDeleteButton\",value:function showDeleteButton(){if(this.state.showDelete){return\"visible\";}else{return\"invisible\";}}},{key:\"render\",value:function render(){var _this5=this;var sortedPosts=this.state.posts.sort(function(a,b){return b.id-a.id;});var posts=sortedPosts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post,delete:_this5.deletePost,showDeleteButton:_this5.showDeleteButton},post.id);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PostForm,{post:this.addNewPost,showDelete:this.handleShowDeleteButton,showDeleteButton:this.showDeleteButton}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:posts})]});}}]);return Posts;}(React.Component);export default Posts;","map":{"version":3,"sources":["/Users/jaakko/JaakkoSaranpaa.fi/Jaakko00.github.io/src/Posts.js"],"names":["React","axios","Post","PostForm","Row","Posts","props","state","posts","showDelete","addNewPost","bind","deletePost","showDeleteButton","handleShowDeleteButton","get","then","response","setState","data","catch","error","console","log","text","sender","title","randomColor","randomnumber","Math","floor","random","create_time","Date","toISOString","slice","color","newPost","content","post","delete","id","filter","postToStay","sortedPosts","sort","a","b","map","Component"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport Post from \"./Post\";\nimport PostForm from \"./PostForm\";\nimport { Row } from \"react-bootstrap\";\n\nclass Posts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { posts: [], showDelete: false };\n\n    this.addNewPost = this.addNewPost.bind(this);\n    this.deletePost = this.deletePost.bind(this);\n    this.showDeleteButton = this.showDeleteButton.bind(this);\n    this.handleShowDeleteButton = this.handleShowDeleteButton.bind(this);\n  }\n\n  async componentDidMount() {\n    axios\n      .get(\"https://bullet-in-board.herokuapp.com/posts\")\n      .then((response) => {\n        this.setState({ posts: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  /**\n   * addNewPost adds a new post to the database\n   *\n   * After randomly deciding for a color, it creates a newPost with all the given information, and then sends that to the database\n   * @param {string} text\n   * @param {string} sender\n   * @param {string} title\n   */\n  async addNewPost(text, sender, title) {\n    console.log(\"Adding post\");\n\n    /**\n     * randomColor randomly chooses out of 4 bootstrap colors\n     * @returns {string} color\n     */\n    function randomColor() {\n      var randomnumber = Math.floor(Math.random() * (4 - 1 + 1)) + 1;\n      if (randomnumber === 1) {\n        return \"success\";\n      }\n      if (randomnumber === 2) {\n        return \"danger\";\n      }\n      if (randomnumber === 3) {\n        return \"warning\";\n      } else {\n        return \"info\";\n      }\n    }\n\n    let create_time = new Date().toISOString().slice(0, 10);\n    let color = randomColor();\n    let newPost = {\n      content: text,\n      create_time: create_time,\n      sender: sender,\n      title: title,\n      color: color,\n    };\n    console.log(newPost);\n    axios\n      .post(\"https://bullet-in-board.herokuapp.com/posts\", newPost)\n      .catch((error) => {\n        console.log(error);\n      })\n      .then((response) => {\n        console.log(\"Added new post\");\n        axios\n          .get(\"https://bullet-in-board.herokuapp.com/posts\")\n          .then((response) => {\n            this.setState({ posts: response.data });\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      });\n  }\n\n  /**\n   * deletePost finds the id of the post given, and deletes it off the database and state\n   * @param {object} post\n   */\n  async deletePost(post) {\n    axios\n      .delete(`https://bullet-in-board.herokuapp.com/posts/${post.id}`)\n      .then((response) => {\n        this.setState({\n          posts: this.state.posts.filter(\n            (postToStay) => postToStay.id !== post.id\n          ),\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  handleShowDeleteButton() {\n    this.setState(({showDelete}) => ({ showDelete: !showDelete }));\n  }\n\n  showDeleteButton() {\n    if (this.state.showDelete) {\n      return \"visible\";\n    } else {\n      return \"invisible\";\n    }\n  }\n\n  render() {\n    let sortedPosts = this.state.posts.sort((a, b) => b.id - a.id);\n    let posts = sortedPosts.map((post) => (\n      <Post\n        key={post.id}\n        post={post}\n        delete={this.deletePost}\n        showDeleteButton={this.showDeleteButton}\n      ></Post>\n    ));\n    return (\n      <>\n        <PostForm\n          post={this.addNewPost}\n          showDelete={this.handleShowDeleteButton}\n          showDeleteButton={this.showDeleteButton}\n        ></PostForm>\n\n        <Row className=\"justify-content-center\">{posts}</Row>\n      </>\n    );\n  }\n}\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}